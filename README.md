# 人口普查管理系统 (Population Census Management System - CMS)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-2.5.14-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![Vue.js](https://img.shields.io/badge/Vue.js-3.5.24-brightgreen.svg)](https://vuejs.org/)
[![MyBatis Plus](https://img.shields.io/badge/MyBatis%20Plus-3.4.2-brightgreen.svg)](https://baomidou.com/)

## 📋 项目简介

人口普查管理系统（CMS）是一个基于Spring Boot + Vue 3开发的现代化前后端分离应用，专为高效管理和统计人口普查数据而设计。系统包含网页管理后台、微信小程序和Android移动端三个客户端，提供了完整的户籍、居民、教育、医疗、就业、社保、房产、车辆等信息的管理功能，并支持多维度的数据统计和可视化展示。

本项目旨在解决传统人口普查数据管理效率低下、数据不统一、统计分析困难等问题，通过现代化的技术架构和友好的用户界面，显著提升人口普查工作的效率和质量。系统支持Web管理后台、微信小程序和Android移动端三种访问方式，满足不同用户群体的需求。
## 🛠️ 技术栈

### 后端技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| Spring Boot | 2.5.14 | 后端框架 |
| MySQL | 8.0 | 数据库 |
| MyBatis Plus | 3.4.2 | ORM框架 |
| HikariCP | 4.0.3 | 数据库连接池 |
| JWT | 0.11.2 | 身份认证 |
| Logback | 1.2.11 | 日志框架 |
| WebSocket | - | 实时通信 |
| Lombok | 1.18.24 | 简化Java代码 |
| BCrypt | - | 密码加密 |

### 前端网页技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| Vue | 3.5.24 | 前端框架 |
| Element Plus | 2.11.8 | UI组件库 |
| Vue Router | 4.6.3 | 路由管理 |
| Axios | - | HTTP客户端 |
| ECharts | 6.0.0 | 数据可视化 |
| Pinia | - | 状态管理 |
| Webpack | - | 模块打包 |
| Babel | - | JavaScript编译 |

### 微信小程序技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| Vue | - | 小程序框架 |
| uni-app | 3.0.0 | 跨平台开发框架 |
| Uni UI | 1.4.24 | UI组件库 |
| STOMP.js | - | WebSocket通信 |
| SockJS | - | WebSocket仿真 |

### Android端技术栈
| 技术 | 版本 | 用途 |
|------|------|------|
| Kotlin | 1.8.0 | 开发语言 |
| Jetpack Compose | 1.3.0 | UI框架 |
| Retrofit | 2.9.0 | 网络请求框架 |
| OkHttp | 4.9.3 | HTTP客户端 |
| Room | 2.5.0 | 本地数据库 |
| ViewModel & LiveData | - | 架构组件 |
| Hilt | 2.44 | 依赖注入 |
| Navigation Compose | - | 页面导航 |
## ✨ 功能特性

### 核心业务模块
- 🏠 **户籍管理**：完整的户籍信息CRUD操作，支持按户籍编号和户主姓名搜索
- 👥 **居民管理**：居民信息管理与户籍关联，支持按姓名和身份证号搜索
- 🎓 **教育管理**：教育背景信息管理，与居民信息关联确保数据一致性
- 🏥 **医疗管理**：医疗保障信息管理，支持按居民姓名和医院名称搜索
- 💼 **就业管理**：就业情况信息管理，支持按居民姓名和工作单位搜索
- 🏦 **社保管理**：社会保险信息管理，支持按居民姓名和参保状态搜索
- 🏡 **房产管理**：房产信息管理，支持按多种条件搜索，使用BigDecimal处理金额和面积
- 🚗 **车辆管理**：车辆信息管理，支持按多种条件搜索，使用BigDecimal处理购置价格

### 系统功能
- 🔐 **用户认证**：基于JWT的登录认证，使用BCrypt加密算法处理密码
- 🛡️ **权限控制**：基于角色的访问控制（RBAC），动态菜单和路由生成
- 📊 **统计分析**：多维度数据统计，包括地区分布、人口增长趋势、年龄分布等
- 📈 **数据可视化**：ECharts图表展示，支持柱状图、折线图、饼图、地图等多种图表类型
- 🔍 **搜索筛选**：支持各模块的高级搜索和筛选功能
- 📄 **分页处理**：所有列表支持分页，提高大数据量下的性能
- 🔄 **实时通信**：WebSocket数据实时更新，确保数据一致性
- 🧹 **缓存管理**：精细化的缓存管理，针对统计类高频查询结果进行缓存与即时清除

### 安全机制
- 🛡️ **SQL注入防护**：使用MyBatis Plus的参数化查询，避免直接拼接SQL语句
- 🚫 **XSS攻击防护**：前后端双重防护，前端输入验证和转义，后端对输入数据进行过滤
- 🔒 **CSRF防护**：使用JWT Token机制，无状态认证避免CSRF攻击
- 🚪 **接口访问控制**：基于JWT Token的接口保护，权限验证确保只有授权用户才能访问特定接口
- 🔐 **密码安全**：使用BCrypt加密算法，密码加盐处理提高安全性
## 🚀 快速开始

### 环境要求
- JDK 17+
- MySQL 8.0+
- Node.js 14+
- Maven 3.6+
- 微信开发者工具（用于小程序开发）
- Android Studio Giraffe+
- Android SDK 33+
- Kotlin 1.8.0+
- Gradle 8.0+

### 项目结构
```
CMS/
├── src/                      # 后端代码
│   ├── main/java/            # Java源码
│   │   └── com/example/cms/  # 业务代码
│   └── main/resources/       # 配置文件
│       ├── mapper/           # MyBatis XML文件
│       └── application.properties # 应用配置
├── vue/                      # 前端网页代码
│   ├── src/                  # Vue源码
│   │   ├── api/              # API请求
│   │   ├── components/       # 组件
│   │   ├── views/            # 页面
│   │   ├── router/           # 路由
│   │   └── utils/            # 工具类
│   └── dist/                 # 构建产物
├── cms-miniprogram/          # 微信小程序代码
│   ├── pages/                # 页面组件
│   ├── utils/                # 工具类
│   └── App.vue               # 小程序入口
├── cmsandroid/               # Android端代码
│   ├── app/                  # 应用模块
│   │   ├── src/main/
│   │   │   ├── java/com/example/cms/ # 业务代码
│   │   │   └── res/          # 资源文件
│   │   └── build.gradle.kts  # 模块配置
│   └── build.gradle.kts      # 项目配置
├── database_cms.sql          # 数据库初始化脚本
├── README.md                 # 项目说明文档
└── ...                       # 其他配置文件
```

### 安装步骤

1. **克隆项目**
   ```bash
   git clone https://github.com/TF49/CMS.git
   cd CMS
   ```

2. **数据库初始化**
   - 创建数据库 `population`
   - 执行 `database_cms.sql` 脚本初始化表结构和数据
   ```bash
   mysql -u root -p < database_cms.sql
   ```

3. **配置修改**
   - 后端配置：复制 `src/main/resources/application-template.properties` 为 `application.properties`，并修改其中的数据库连接信息
   - 前端配置：修改 `vue/src/utils/request.js` 中的API地址
   - 小程序配置：修改 `cms-miniprogram/utils/request.js` 中的API地址

⚠️ **安全提醒**：请勿将包含真实数据库密码的配置文件提交到版本控制系统中。建议使用环境变量或外部配置来管理敏感信息。
4. **启动后端服务**
   ```bash
   mvn spring-boot:run
   ```
   或打包运行
   ```bash
   mvn clean package -DskipTests
   java -jar target/cms-0.0.1-SNAPSHOT.jar
   ```

5. **启动前端网页服务**
   ```bash
   cd vue
   npm install
   npm run serve
   ```
   或构建生产版本
   ```bash
   npm run build
   ```

6. **启动微信小程序开发**
   ```bash
   cd cms-miniprogram
   npm install
   ```
   使用微信开发者工具打开项目，选择 `cms-miniprogram` 目录

7. **Android端开发**
   ```bash
   # 使用Android Studio打开android目录
   # 连接Android设备或启动模拟器
   # 点击运行按钮构建并运行应用
   ```

### 访问系统
- 前端网页地址：http://localhost:8080
- 后端API地址：http://localhost:9090
- Android端：通过Android设备或模拟器运行
- 微信小程序：通过微信开发者工具运行
- 默认管理员账号：admin / 123456

### IP配置说明

当电脑的网络IP地址变化时，可能会出现跨域访问错误。以下是解决方案：

#### 临时解决方案
1. **更新后端CORS配置**：修改 `src/main/java/com/example/cms/config/CorsConfig.java` 中的 `allowedOrigins` 列表，添加新的IP地址
2. **重启后端服务**：使配置生效

#### 永久解决方案（推荐）
1. **修改CORS配置**：将 `allowedOrigins` 替换为 `allowedOriginPatterns`，允许所有IP访问
   ```java
   registry.addMapping("/**")
           .allowedOriginPatterns("http://*")
           .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")
           .allowedHeaders("*")
           .allowCredentials(true)
           .maxAge(3600);
   ```

2. **重启后端服务**

#### 详细配置指南
详见项目根目录下的《IP配置指南.md》文件，包含：
- 完整的IP配置解决方案
- 前端和后端的配置方法
- 微信小程序的配置方法
- 常见问题排查
- 多种场景下的最佳实践
## 📊 数据库设计

### 核心表结构
- **users**：用户表，存储系统用户信息
- **households**：户籍表，存储户籍基本信息
- **residents**：居民表，存储居民基本信息
- **education**：教育表，存储居民教育信息
- **medical**：医疗表，存储居民医疗信息
- **employment**：就业表，存储居民就业信息
- **social_security**：社保表，存储居民社保信息
- **property**：房产表，存储居民房产信息
- **vehicle**：车辆表，存储居民车辆信息

### 表关系设计
- 户籍表与居民表：一对多关系
- 居民表与其他信息表：一对多关系
- 用户表与业务表：无直接关系，通过权限控制访问

### 核心表关系图
```
households (户籍表) ←--- residents (居民表)
    ↓                    ↓
    └── education ──────┼── medical
         │              │
         ├── employment ┼── social_security
         │              │
         └── property ──┼── vehicle
```## 🎯 主要功能模块

### 1. 户籍管理
- 实现了户籍信息的增删改查功能
- 支持按户籍编号和户主姓名搜索
- 户籍详情展示，关联显示该户籍下的所有居民

### 2. 居民管理
- 居民信息的完整CRUD操作
- 支持与户籍信息关联
- 按姓名和身份证号搜索
- 居民详情展示，关联显示该居民的所有相关信息

### 3. 教育管理
- 教育背景信息管理
- 支持按居民姓名和学校名称搜索
- 与居民信息关联，确保数据一致性

### 4. 医疗管理
- 医疗保障信息管理
- 支持按居民姓名和医院名称搜索
- 与居民信息关联

### 5. 就业管理
- 就业情况信息管理
- 支持按居民姓名和工作单位搜索
- 与居民信息关联

### 6. 社保管理
- 社会保险信息管理
- 支持按居民姓名和参保状态搜索
- 与居民信息关联

### 7. 房产管理
- 房产信息管理
- 支持按居民姓名、房产类型、使用类型、地址搜索
- 使用BigDecimal处理金额和面积等数值

### 8. 车辆管理
- 车辆信息管理
- 支持按居民姓名、车牌号、车辆类型、品牌搜索
- 使用BigDecimal处理购置价格等数值

### 9. 统计分析
- 系统统计摘要：展示各模块数据总量
- 地区人口统计：按地区分布展示人口数量
- 人口增长趋势：近二十年人口增长趋势分析
- 年龄分布：各年龄段人口分布统计
- 行业分布：各行业就业人数统计
- 就业状态分布：在职、失业、退休等状态分布
- 社保参保情况：各类型社保参保率和参保人数
- 房产类型分布：各房产类型数量统计
- 车辆品牌分布：各车辆品牌数量统计
- 教育程度分布：各教育程度男女人数统计
- 医疗保险类型：各医疗保险类型分布统计

### 10. 缓存管理
- 系统缓存管理
- 统计数据缓存的自动与手动清除
- 支持指定名称的缓存清除
- 确保统计数据与数据库实时同步

### 11. 用户认证和权限控制
- 完整的登录、注册功能
- 基于角色的权限分配
- 动态菜单和路由
- 操作权限验证

## 🔧 开发指南
### 代码规范
- 后端：遵循阿里巴巴Java开发手册
- 前端：遵循Vue.js风格指南

### Git提交规范
```
feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式调整
refactor: 代码重构
test: 测试相关
chore: 构建或辅助工具变动
```

### 项目架构
本项目采用前后端分离架构，具有良好的可维护性和扩展性：

```
┌─────────────────────────────────────────────────────────┐
│                     前端应用层                           │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │  Vue 3   │  │ Element  │  │ Vue Router│  │ Axios    │  │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────┐
│                     API网关层                           │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │ JWT认证  │  │ 权限控制 │  │ 接口路由 │  │ 异常处理 │  │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────┐
│                     业务逻辑层                           │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │ 服务层   │  │ 实体层   │  │ 工具类   │  │ 切面类   │  │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────┐
│                     数据访问层                           │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │MyBatis Plus│  │ HikariCP │  │ 事务管理 │  │ 缓存管理 │  │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────┐
│                     数据存储层                           │
│  ┌──────────┐                                            │
│  │  MySQL   │                                            │
│  └──────────┘                                            │
└─────────────────────────────────────────────────────────┘
```

## 📈 性能指标

- 系统响应时间：< 200ms
- 并发用户数：支持500+并发
- 数据存储容量：支持百万级数据存储
- 系统可用性：> 99.9%

## 🚀 未来展望

### 功能扩展
- 实现Excel/PDF数据导出功能
- 添加Excel数据批量导入功能
- 开发高级搜索和筛选功能
- 增加文件上传和管理功能

### 性能优化
- 集成Redis缓存，提高系统响应速度
- 实现API限流机制，保护系统安全
- 优化数据库查询，提高查询效率
- 考虑引入消息队列，处理异步任务

### 用户体验提升
- 移动端适配，支持手机和平板访问
- 更丰富的数据可视化图表
- 智能数据分析和预测功能
- 个性化的用户界面

## 📄 许可证

本项目采用MIT许可证，详见 [LICENSE](LICENSE) 文件。
## 🤝 贡献指南

欢迎提交Issue和Pull Request来帮助改进项目！

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启Pull Request

## 📞 联系方式

如有问题或建议，欢迎通过以下方式联系：

- Email: 2131969030@qq.com
- GitHub: [TF49](https://github.com/TF49)

## 📋 更新日志

### v1.0.0 (2025-12-03)
- ✅ 完成所有核心业务模块开发
- ✅ 实现用户认证和权限控制系统
- ✅ 完成统计分析和数据可视化功能
- ✅ 实现WebSocket实时通信功能
- ✅ 完成微信小程序端开发
- ✅ 通过全面测试，系统上线

## 🎉 致谢

感谢所有为项目做出贡献的开发者和测试人员！

---

**⭐️ 如果这个项目对你有帮助，请给个Star支持一下！**